import{s as I}from"./index-D9z9D-Dg.js";import{s as w}from"./index-C2P__SF3.js";import{_ as k,r as h,k as B,w as F,o as c,a as e,c as p,e as x,t as d,b as N,d as C,F as v,l as T,v as A}from"./index-D73lKA6z.js";import{a as O}from"./axios-DsPaXkF5.js";import"./index-ujokio9Y.js";import"./index-N9J7iN1J.js";const R={setup(){const i=h([]),u=h([]),_=h(""),s=async(o,n,a)=>{const t=o.target.files[0];if(t){const l=new FileReader;l.onload=async r=>{i.value[n][a]=r.target.result;const D=new FormData;D.append("file",t);try{const m=await O.post("/api/process-upload",D,{headers:{"Content-Type":"multipart/form-data"}});m.data.status==="success"?f(m.data.detections[0].message,n):m.data.status==="warning"&&f(m.data.new_data,n)}catch(m){console.error("Error uploading file:",m)}},l.readAsDataURL(t)}},g=(o,n)=>o===n?'<span class="text-green-500">Match</span>':'<span class="text-red-500">Not Match</span>',b=o=>{const{insured:n,buyer:a,dependents:t}=o;i.value=[{...n,type:"Insured",front:null,back:null},{...a,type:"Buyer",front:null,back:null},...t.map(l=>({...l,type:"Dependent",front:null,back:null}))],u.value=i.value.map(l=>{var r;return{NationalID:{oldData:l.nationalID,newData:""},CitizenID:{oldData:l.citizenID,newData:""},DateOfBirth:{oldData:l.dateOfBirth,newData:""},FullName:{oldData:l.fullName,newData:""},Address:{oldData:l.address,newData:""},Gender:{oldData:((r=l.gender)==null?void 0:r.name)||"",newData:""}}})},f=(o,n)=>{var l,r;console.log("Updated Data:",o);const a=i.value[n],t={NationalID:{oldData:a.nationalID,newData:o.id_identity_card||a.nationalID},CitizenID:{oldData:a.citizenID,newData:o.id_passport||a.citizenID},DateOfBirth:{oldData:a.dateOfBirth,newData:o.birth_date||a.dateOfBirth},FullName:{oldData:a.fullName,newData:o.fullname||a.fullName},Address:{oldData:a.address,newData:o.address||a.address},Gender:{oldData:((l=a.gender)==null?void 0:l.name)||"",newData:o.gender||((r=a.gender)==null?void 0:r.name)||""}};u.value[n]=t};return b({id:"64bbc76b-cc55-4afd-a333-c596b9e005d4",insured:{id:"052201011360",type_id:{code:"ID_CARD_1",name:"Căn cước công dân"},nationalID:"052201011360",citizenID:"215561550",fullName:"Đặng Trung Tiến",dateOfBirth:"03/11/2001",gender:{code:"MALE",name:"Nam"},address:"Xóm 1, Thôn Thượng Giang 1, Tây Giang, Tây Sơn, Bình Định",issuingPlace:"",nationality:{code:null,name:null},visaNumber:"",insuranceRelationship:null,mobilePhone:"",email:"",age:"23",education:{code:null,name:null},maritalStatus:{code:null,name:null},profession:{code:null,name:null},majorCategory:{code:null,name:null},mediumCategory:{code:null,name:null},minorCategory:{code:null,name:null},companyName:"",position:"",jobDescription:"",monthlyIncome:"",postalCode:"",companyPhone:"",branchNumber:"",relationShip:{code:"FOR_MALE",name:"Vợ"}},buyer:{id:"049099007188",type_id:{code:"ID_CARD_1",name:"Căn cước công dân"},nationalID:"049099007188",citizenID:"245349072",fullName:"Đoàn Ngọc Thành",dateOfBirth:"28/01/1999",gender:{code:"MALE",name:"Nam"},address:"Thôn Quảng Bình, Nghĩa Thắng, Đắk R'Lấp, Đắk Nông",issuingPlace:"",nationality:{code:null,name:null},visaNumber:"",insuranceRelationship:null,mobilePhone:"",email:"",age:null,education:{code:null,name:null},maritalStatus:{code:null,name:null},profession:{code:null,name:null},majorCategory:{code:null,name:null},mediumCategory:{code:null,name:null},minorCategory:{code:null,name:null},companyName:"",position:"",jobDescription:"",monthlyIncome:"",postalCode:"",companyPhone:"",branchNumber:"",relationShip:{code:null,name:null}},dependents:[{id:"",type_id:{code:null,name:null},nationalID:"12313123",citizenID:"12312312123",fullName:"123123123213",dateOfBirth:"",gender:{code:"FEMALE",name:"Nữ"},address:"123123",issuingPlace:"",nationality:{code:null,name:null},visaNumber:"",insuranceRelationship:null,mobilePhone:"",email:"",age:"",education:{code:null,name:null},maritalStatus:{code:null,name:null},profession:{code:null,name:null},majorCategory:{code:"IT",name:"Công nghệ thông tin"},mediumCategory:{code:null,name:null},minorCategory:{code:null,name:null},companyName:"",position:"",jobDescription:"",monthlyIncome:"",postalCode:"",companyPhone:"",branchNumber:"",relationShip:{code:null,name:null}}]}),{people:i,comparisonData:u,notes:_,handleUpload:s,compareFields:g}}},S={class:"flex flex-col gap-8"},L={class:"card flex-1 flex flex-col gap-4 p-4"},M={class:"font-semibold text-xl"},P={class:"font-semibold text-xl"},U={class:"flex flex-col gap-4"},j={class:"flex flex-col gap-2"},z=["for"],E=["id","onChange"],V={key:0,class:"mt-2"},G={class:"flex flex-col gap-2"},H=["for"],Q=["id","onChange"],W={key:0,class:"mt-2"},X={class:"card flex-1 flex flex-col gap-4 p-4"},q={class:"font-semibold text-xl"},J={class:"min-w-full mt-4 border-separate border-spacing-2 border border-gray-300"},K=e("thead",null,[e("tr",null,[e("th",{class:"border border-gray-400 px-4 py-2"},"Field"),e("th",{class:"border border-gray-400 px-4 py-2"},"Old Data"),e("th",{class:"border border-gray-400 px-4 py-2"},"New Data"),e("th",{class:"border border-gray-400 px-4 py-2"},"Comparison")])],-1),Y={class:"border border-gray-300 px-4 py-2"},Z={class:"border border-gray-300 px-4 py-2"},$={class:"border border-gray-300 px-4 py-2"},ee=["innerHTML"],ae={class:"card flex flex-col gap-4 p-4"},oe=e("div",{class:"font-semibold text-xl"},"Notes",-1),ne={class:"flex flex-col gap-2"},le=e("label",{for:"notes",class:"font-medium"},"Notes",-1);function te(i,u,_,s,g,b){const f=w,y=I;return c(),B(y,null,{default:F(()=>[e("div",S,[(c(!0),p(v,null,x(s.people,(o,n)=>(c(),p("div",{key:n,class:"flex flex-col md:flex-row gap-8 mb-8"},[e("div",L,[e("div",M,d(n+1)+". Upload ID Cards for "+d(o.type),1),e("div",P,d(o.fullName),1),e("div",U,[e("div",j,[e("label",{for:"front-upload-"+n,class:"font-medium"},"Upload Front Side",8,z),e("input",{id:"front-upload-"+n,type:"file",accept:"image/*",onChange:a=>s.handleUpload(a,n,"front"),class:"border rounded p-2"},null,40,E),o.front?(c(),p("div",V,[N(f,{src:o.front,width:"250",class:"w-full h-auto object-cover border rounded"},null,8,["src"])])):C("",!0)]),e("div",G,[e("label",{for:"back-upload-"+n,class:"font-medium"},"Upload Back Side",8,H),e("input",{id:"back-upload-"+n,type:"file",accept:"image/*",onChange:a=>s.handleUpload(a,n,"back"),class:"border rounded p-2"},null,40,Q),o.back?(c(),p("div",W,[N(f,{src:o.back,width:"250",class:"w-full h-auto object-cover border rounded"},null,8,["src"])])):C("",!0)])])]),e("div",X,[e("div",q,"Compare Data for "+d(o.type)+" "+d(n+1),1),e("table",J,[K,e("tbody",null,[(c(!0),p(v,null,x(s.comparisonData[n],(a,t)=>(c(),p("tr",{key:t},[e("td",Y,d(t),1),e("td",Z,d(a.oldData),1),e("td",$,d(a.newData),1),e("td",{class:"border border-gray-300 px-4 py-2",innerHTML:s.compareFields(a.oldData,a.newData)},null,8,ee)]))),128))])])])]))),128)),e("div",ae,[oe,e("div",ne,[le,T(e("textarea",{id:"notes",rows:"6","onUpdate:modelValue":u[0]||(u[0]=o=>s.notes=o),placeholder:"Add any additional notes here",class:"border rounded p-2"},null,512),[[A,s.notes]])])])])]),_:1})}const me=k(R,[["render",te]]);export{me as default};
