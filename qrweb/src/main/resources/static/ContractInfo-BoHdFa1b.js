import{s as w}from"./index-BJrO8TMX.js";import{s as k}from"./index-BCRvhQsM.js";import{_ as B,r as b,k as F,w as T,o as i,a,c as f,e as N,t as r,b as C,d as v,F as I,l as A,v as O}from"./index-BlUntoHi.js";import{a as R}from"./axios-DsPaXkF5.js";import"./index-C8EjR7sY.js";import"./index-6D8f-bwh.js";const L={setup(){const u=b([]),m=b([]),g=b(""),s=async(e,o,n)=>{const d=e.target.files[0];if(d){const l=new FileReader;l.onload=async c=>{u.value[o][n]=c.target.result;const x=new FormData;x.append("file",d);try{const p=await R.post("/api/process-upload",x,{headers:{"Content-Type":"multipart/form-data"}});p.data.status==="success"?_(p.data.detections[0].message,o):p.data.status==="warning"&&_(p.data.new_data,o)}catch(p){console.error("Error uploading file:",p)}},l.readAsDataURL(d)}},y=(e,o)=>e===o?'<span class="text-green-500">Match</span>':'<span class="text-red-500">Not Match</span>',D=e=>{const{insured:o,buyer:n,dependents:d}=e;u.value=[{...o,type:"Insured",front:null,back:null},{...n,type:"Buyer",front:null,back:null},...d.map(l=>({...l,type:"Dependent",front:null,back:null}))],m.value=u.value.map(l=>{var c;return{NationalID:{oldData:l.nationalID,newData:""},CitizenID:{oldData:l.citizenID,newData:""},DateOfBirth:{oldData:h(l.dateOfBirth),newData:""},FullName:{oldData:l.fullName,newData:""},Address:{oldData:l.address,newData:""},Gender:{oldData:((c=l.gender)==null?void 0:c.name)||"",newData:""}}})},h=e=>{if(!e||e.length!==8)return e;const o=e.slice(0,2),n=e.slice(2,4),d=e.slice(4);return`${o}/${n}/${d}`},_=(e,o)=>{var l,c;console.log("Updated Data:",e);const n=u.value[o],d={NationalID:{oldData:n.nationalID,newData:e.id_identity_card||n.nationalID},CitizenID:{oldData:n.citizenID,newData:e.id_passport||n.citizenID},DateOfBirth:{oldData:n.dateOfBirth,newData:h(e.birth_date)||n.dateOfBirth},FullName:{oldData:n.fullName,newData:e.fullname||n.fullName},Address:{oldData:n.address,newData:e.address||n.address},Gender:{oldData:((l=n.gender)==null?void 0:l.name)||"",newData:e.gender||((c=n.gender)==null?void 0:c.name)||""}};m.value[o]=d};return D({id:"64bbc76b-cc55-4afd-a333-c596b9e005d4",insured:{id:"052201011360",type_id:{code:"ID_CARD_1",name:"Căn cước công dân"},nationalID:"052201011360",citizenID:"215561550",fullName:"Đặng Trung Tiến",dateOfBirth:"03/11/2001",gender:{code:"MALE",name:"Nam"},address:"Xóm 1, Thôn Thượng Giang 1, Tây Giang, Tây Sơn, Bình Định",issuingPlace:"",nationality:{code:null,name:null},visaNumber:"",insuranceRelationship:null,mobilePhone:"",email:"",age:"23",education:{code:null,name:null},maritalStatus:{code:null,name:null},profession:{code:null,name:null},majorCategory:{code:null,name:null},mediumCategory:{code:null,name:null},minorCategory:{code:null,name:null},companyName:"",position:"",jobDescription:"",monthlyIncome:"",postalCode:"",companyPhone:"",branchNumber:"",relationShip:{code:"FOR_MALE",name:"Vợ"}},buyer:{id:"049099007188",type_id:{code:"ID_CARD_1",name:"Căn cước công dân"},nationalID:"049099007188",citizenID:"245349072",fullName:"Đoàn Ngọc Thành",dateOfBirth:"28/01/1999",gender:{code:"MALE",name:"Nam"},address:"Thôn Quảng Bình, Nghĩa Thắng, Đắk R'Lấp, Đắk Nông",issuingPlace:"",nationality:{code:null,name:null},visaNumber:"",insuranceRelationship:null,mobilePhone:"",email:"",age:null,education:{code:null,name:null},maritalStatus:{code:null,name:null},profession:{code:null,name:null},majorCategory:{code:null,name:null},mediumCategory:{code:null,name:null},minorCategory:{code:null,name:null},companyName:"",position:"",jobDescription:"",monthlyIncome:"",postalCode:"",companyPhone:"",branchNumber:"",relationShip:{code:null,name:null}},dependents:[{id:"",type_id:{code:null,name:null},nationalID:"12313123",citizenID:"12312312123",fullName:"123123123213",dateOfBirth:"",gender:{code:"FEMALE",name:"Nữ"},address:"123123",issuingPlace:"",nationality:{code:null,name:null},visaNumber:"",insuranceRelationship:null,mobilePhone:"",email:"",age:"",education:{code:null,name:null},maritalStatus:{code:null,name:null},profession:{code:null,name:null},majorCategory:{code:"IT",name:"Công nghệ thông tin"},mediumCategory:{code:null,name:null},minorCategory:{code:null,name:null},companyName:"",position:"",jobDescription:"",monthlyIncome:"",postalCode:"",companyPhone:"",branchNumber:"",relationShip:{code:null,name:null}}]}),{people:u,comparisonData:m,notes:g,handleUpload:s,compareFields:y}}},M={class:"flex flex-col gap-8"},P={class:"card flex-1 flex flex-col gap-4 p-4"},U={class:"font-semibold text-xl"},j={class:"font-semibold text-xl"},z={class:"flex flex-col gap-4"},E={class:"flex flex-col gap-2"},S=["for"],V=["id","onChange"],G={key:0,class:"mt-2"},H={class:"flex flex-col gap-2"},Q=["for"],W=["id","onChange"],X={key:0,class:"mt-2"},$={class:"card flex-1 flex flex-col gap-4 p-4"},q={class:"font-semibold text-xl"},J={class:"min-w-full mt-4 border-separate border-spacing-2 border border-gray-300"},K=a("thead",null,[a("tr",null,[a("th",{class:"border border-gray-400 px-4 py-2"},"Field"),a("th",{class:"border border-gray-400 px-4 py-2"},"Old Data"),a("th",{class:"border border-gray-400 px-4 py-2"},"New Data"),a("th",{class:"border border-gray-400 px-4 py-2"},"Comparison")])],-1),Y={class:"border border-gray-300 px-4 py-2"},Z={class:"border border-gray-300 px-4 py-2"},ee={class:"border border-gray-300 px-4 py-2"},ae=["innerHTML"],oe={class:"card flex flex-col gap-4 p-4"},ne=a("div",{class:"font-semibold text-xl"},"Notes",-1),le={class:"flex flex-col gap-2"},te=a("label",{for:"notes",class:"font-medium"},"Notes",-1);function se(u,m,g,s,y,D){const h=k,_=w;return i(),F(_,null,{default:T(()=>[a("div",M,[(i(!0),f(I,null,N(s.people,(t,e)=>(i(),f("div",{key:e,class:"flex flex-col md:flex-row gap-8 mb-8"},[a("div",P,[a("div",U,r(e+1)+". Upload ID Cards for "+r(t.type),1),a("div",j,r(t.fullName),1),a("div",z,[a("div",E,[a("label",{for:"front-upload-"+e,class:"font-medium"},"Upload Front Side",8,S),a("input",{id:"front-upload-"+e,type:"file",accept:"image/*",onChange:o=>s.handleUpload(o,e,"front"),class:"border rounded p-2"},null,40,V),t.front?(i(),f("div",G,[C(h,{src:t.front,width:"250",class:"w-full h-auto object-cover border rounded"},null,8,["src"])])):v("",!0)]),a("div",H,[a("label",{for:"back-upload-"+e,class:"font-medium"},"Upload Back Side",8,Q),a("input",{id:"back-upload-"+e,type:"file",accept:"image/*",onChange:o=>s.handleUpload(o,e,"back"),class:"border rounded p-2"},null,40,W),t.back?(i(),f("div",X,[C(h,{src:t.back,width:"250",class:"w-full h-auto object-cover border rounded"},null,8,["src"])])):v("",!0)])])]),a("div",$,[a("div",q,"Compare Data for "+r(t.type)+" "+r(e+1),1),a("table",J,[K,a("tbody",null,[(i(!0),f(I,null,N(s.comparisonData[e],(o,n)=>(i(),f("tr",{key:n},[a("td",Y,r(n),1),a("td",Z,r(o.oldData),1),a("td",ee,r(o.newData),1),a("td",{class:"border border-gray-300 px-4 py-2",innerHTML:s.compareFields(o.oldData,o.newData)},null,8,ae)]))),128))])])])]))),128)),a("div",oe,[ne,a("div",le,[te,A(a("textarea",{id:"notes",rows:"6","onUpdate:modelValue":m[0]||(m[0]=t=>s.notes=t),placeholder:"Add any additional notes here",class:"border rounded p-2"},null,512),[[O,s.notes]])])])])]),_:1})}const pe=B(L,[["render",se]]);export{pe as default};
