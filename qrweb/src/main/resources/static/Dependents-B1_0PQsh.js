import{s as C}from"./index-D78ukbc2.js";import{s as T}from"./index-BFrv1hlM.js";import{s as D}from"./index-ys-_YDvX.js";import{s as N}from"./index-CVez_OLS.js";import{s as k}from"./index-CKDhyRLQ.js";import{s as A}from"./index-DFZoNrKN.js";import{s as E}from"./index-WQw-OtQl.js";import{f as M}from"./fetchOptionsMixin-BlPY6uDo.js";import{a as y}from"./axios-DsPaXkF5.js";import{_ as v,u as S,k as t,w as i,o as a,a as s,j as P,t as V,d as n,c as f,e as x,b as m,F as R,p as L,f as Y}from"./index-AsvOEnX4.js";import"./index-CRRyXLhS.js";import"./index-D9Wf1plD.js";import"./index-BJ8Wyxo8.js";import"./index-pGBqgdNe.js";import"./index-BMJz7WCK.js";import"./index-CUBRiCCj.js";import"./index-DBdP8zgP.js";const G={mixins:[M],data(){return{dependents:[],messenger:null,toast:null,CMI_ID:null,selectedOptions:{},dynamicOptions:{}}},methods:{async fetchData(){try{const c=await y.get("http://localhost:8082/v4/api/data"),h=this.extractPrefixes(c.data);await Promise.all(h.map(_=>this.fetchAuto(_)))}catch(c){console.error("Error fetching data:",c)}},extractPrefixes(c){return[...new Set(c.map(h=>h.prefix))]},async fetchAuto(c){try{const h=await y.get(`http://localhost:8082/v4/api/data/prefix/${c}`);this.dynamicOptions[c]=h.data.map(_=>({code:_.key,name:_.value})),this.selectedOptions[c]=""}catch(h){console.error(`Error fetching options for prefix ${c}:`,h)}},async loaddependents(c){try{if(c==null)this.messenger='Không tìm thấy mã thụ lý, vui lòng quay về trang "Danh sách các đơn thụ lý" và chọn đơn xử lý!';else{const h=await y.get(`http://localhost:8082/v4/api/fortest/${c}/dependents`);h!=null&&(this.toast.add({severity:"success",summary:"Success",detail:"Tra tìm thành công!",life:3e3}),this.dependents=h.data)}}catch(h){console.error("Failed to load dependents:",h),this.toast.add({severity:"error",summary:"Error",detail:"An error occurred while fetching dependents data.",life:3e3})}},async submitForm(){try{console.log(this.dependents);const c=await y.put(`http://localhost:8082/v4/api/fortest/${this.CMI_ID}/dependents`,this.dependents);c.data?this.toast.add({severity:"success",summary:"Thành công",detail:c.data.message,life:3e3}):this.toast.add({severity:"error",summary:"Lỗi",detail:c.data.message,life:3e3})}catch(c){console.error("Error submitting form:",c),this.toast.add({severity:"error",summary:"Lỗi",detail:"Không thể gửi dữ liệu.",life:3e3})}}},mounted(){this.toast=S(),this.fetchData(),this.CMI_ID=sessionStorage.getItem("CMI_ID"),!this.CMI_ID||this.CMI_ID==""?this.messenger='Không tìm thấy mã thụ lý, vui lòng quay về trang "Danh sách các đơn thụ lý" và chọn đơn xử lý!':this.loaddependents(this.CMI_ID)}},r=c=>(L("data-v-c98662e5"),c=c(),Y(),c),w={class:""},j={class:"font-semibold text-xl"},F=r(()=>s("label",{for:"CMI_ID"},"Mã thụ lý",-1)),B=r(()=>s("label",{for:"type_id"},"Loại giấy tờ",-1)),J=r(()=>s("label",{for:"nationalID"},"Số chứng minh",-1)),K=r(()=>s("label",{for:"nationalID"},"Số Căn cước",-1)),q=r(()=>s("label",{for:"fullName"},"Họ tên",-1)),z=r(()=>s("label",{for:"dob"},"Ngày tháng năm sinh",-1)),H=r(()=>s("label",{for:"gender"},"Giới tính",-1)),Q=r(()=>s("label",{for:"address"},"Địa chỉ",-1)),W=r(()=>s("label",{for:"issuingPlace"},"Nơi cấp",-1)),X=r(()=>s("label",{for:"nationality"},"Quốc tịch",-1)),Z=r(()=>s("label",{for:"visaNumber"},"Số thị thực nhập cảnh",-1)),$=r(()=>s("label",{for:"mobilePhone"},"Số điện thoại di động",-1)),oo=r(()=>s("label",{for:"email"},"Email",-1)),eo=r(()=>s("label",{for:"age"},"Tuổi",-1)),lo={for:"education"},ao=r(()=>s("label",{for:"maritalStatus"},"Tình trạng hôn nhân",-1)),to=r(()=>s("label",{for:"majorCategory"},"Phân loại lớn",-1)),io=r(()=>s("label",{for:"mediumCategory"},"Phân loại trung",-1)),so=r(()=>s("label",{for:"minorCategory"},"Phân loại nhỏ",-1)),no=r(()=>s("label",{for:"companyName"},"Tên công ty",-1)),mo=r(()=>s("label",{for:"position"},"Chức vụ",-1)),uo=r(()=>s("label",{for:"jobDescription"},"Nội dung nghề nghiệp",-1)),ro=r(()=>s("label",{for:"monthlyIncome"},"Thu nhập tháng",-1)),co=r(()=>s("label",{for:"postalCode"},"Mã vùng",-1)),ho=r(()=>s("label",{for:"companyPhone"},"Điện thoại công ty",-1)),po=r(()=>s("label",{for:"branchNumber"},"Số máy nhánh",-1));function _o(c,h,_,yo,l,g){const b=E,d=A,u=k,p=N,U=D,I=T,O=C;return a(),t(O,{class:"flex flex-col"},{default:i(()=>[s("div",w,[l.messenger!==null?(a(),t(b,{key:0,severity:"error"},{default:i(()=>[P(V(l.messenger),1)]),_:1})):n("",!0),(a(!0),f(R,null,x(l.dependents,o=>(a(),f("div",{class:"card flex flex-col gap-4",key:o.id},[s("div",j,"Người Phụ Thuộc - "+V(o.relationShip.name),1),l.CMI_ID?(a(),t(u,{key:0},{default:i(()=>[m(d,{id:"CMI_ID",modelValue:l.CMI_ID,"onUpdate:modelValue":h[0]||(h[0]=e=>l.CMI_ID=e),readonly:!0},null,8,["modelValue"]),F]),_:1})):n("",!0),l.dynamicOptions.DOCUMENT_TYPE&&l.dynamicOptions.DOCUMENT_TYPE.length?(a(),t(u,{key:1,readonly:""},{default:i(()=>[B,m(p,{modelValue:o.type_id,"onUpdate:modelValue":e=>o.type_id=e,options:l.dynamicOptions.DOCUMENT_TYPE,optionLabel:"name"},null,8,["modelValue","onUpdate:modelValue","options"])]),_:2},1024)):n("",!0),o?(a(),t(u,{key:2},{default:i(()=>[m(d,{id:"nationalID",modelValue:o.citizenID,"onUpdate:modelValue":e=>o.citizenID=e,readonly:!0},null,8,["modelValue","onUpdate:modelValue"]),J]),_:2},1024)):n("",!0),o?(a(),t(u,{key:3},{default:i(()=>[m(d,{id:"nationalID",modelValue:o.nationalID,"onUpdate:modelValue":e=>o.nationalID=e,readonly:!0},null,8,["modelValue","onUpdate:modelValue"]),K]),_:2},1024)):n("",!0),o?(a(),t(u,{key:4},{default:i(()=>[m(d,{id:"fullName",modelValue:o.fullName,"onUpdate:modelValue":e=>o.fullName=e},null,8,["modelValue","onUpdate:modelValue"]),q]),_:2},1024)):n("",!0),o?(a(),t(u,{key:5},{default:i(()=>[m(U,{id:"dob",modelValue:o.dateOfBirth,"onUpdate:modelValue":e=>o.dateOfBirth=e,dateFormat:"mm/dd/yy"},null,8,["modelValue","onUpdate:modelValue"]),z]),_:2},1024)):n("",!0),l.dynamicOptions.GENDER&&l.dynamicOptions.GENDER.length?(a(),t(u,{key:6},{default:i(()=>[H,m(p,{modelValue:o.gender,"onUpdate:modelValue":e=>o.gender=e,options:l.dynamicOptions.GENDER,optionLabel:"name"},null,8,["modelValue","onUpdate:modelValue","options"])]),_:2},1024)):n("",!0),o?(a(),t(u,{key:7},{default:i(()=>[m(d,{id:"address",modelValue:o.address,"onUpdate:modelValue":e=>o.address=e},null,8,["modelValue","onUpdate:modelValue"]),Q]),_:2},1024)):n("",!0),o?(a(),t(u,{key:8},{default:i(()=>[m(d,{id:"issuingPlace",modelValue:o.issuingPlace,"onUpdate:modelValue":e=>o.issuingPlace=e},null,8,["modelValue","onUpdate:modelValue"]),W]),_:2},1024)):n("",!0),l.dynamicOptions.NATIONALITY&&l.dynamicOptions.NATIONALITY.length?(a(),t(u,{key:9},{default:i(()=>[X,m(p,{modelValue:o.nationality,"onUpdate:modelValue":e=>o.nationality=e,options:l.dynamicOptions.NATIONALITY,optionLabel:"name"},null,8,["modelValue","onUpdate:modelValue","options"])]),_:2},1024)):n("",!0),o?(a(),t(u,{key:10},{default:i(()=>[m(d,{id:"visaNumber",modelValue:o.visaNumber,"onUpdate:modelValue":e=>o.visaNumber=e},null,8,["modelValue","onUpdate:modelValue"]),Z]),_:2},1024)):n("",!0),o?(a(),t(u,{key:11},{default:i(()=>[m(d,{id:"mobilePhone",modelValue:o.mobilePhone,"onUpdate:modelValue":e=>o.mobilePhone=e},null,8,["modelValue","onUpdate:modelValue"]),$]),_:2},1024)):n("",!0),o?(a(),t(u,{key:12},{default:i(()=>[m(d,{id:"email",modelValue:o.email,"onUpdate:modelValue":e=>o.email=e},null,8,["modelValue","onUpdate:modelValue"]),oo]),_:2},1024)):n("",!0),o?(a(),t(u,{key:13},{default:i(()=>[m(d,{id:"age",modelValue:o.age,"onUpdate:modelValue":e=>o.age=e},null,8,["modelValue","onUpdate:modelValue"]),eo]),_:2},1024)):n("",!0),l.dynamicOptions.EDUCATION&&l.dynamicOptions.EDUCATION.length?(a(),t(u,{key:14},{default:i(()=>[s("label",lo,"Học lực "+V(o.education),1),m(p,{modelValue:o.education,"onUpdate:modelValue":e=>o.education=e,options:l.dynamicOptions.EDUCATION,optionLabel:"name"},null,8,["modelValue","onUpdate:modelValue","options"])]),_:2},1024)):n("",!0),l.dynamicOptions.MARITAL_STATUS&&l.dynamicOptions.MARITAL_STATUS.length?(a(),t(u,{key:15},{default:i(()=>[ao,m(p,{modelValue:o.maritalStatus,"onUpdate:modelValue":e=>o.maritalStatus=e,options:l.dynamicOptions.MARITAL_STATUS,optionLabel:"name"},null,8,["modelValue","onUpdate:modelValue","options"])]),_:2},1024)):n("",!0),l.dynamicOptions.MAJOR_CATEGORY&&l.dynamicOptions.MAJOR_CATEGORY.length?(a(),t(u,{key:16},{default:i(()=>[to,m(p,{modelValue:o.majorCategory,"onUpdate:modelValue":e=>o.majorCategory=e,options:l.dynamicOptions.MAJOR_CATEGORY,optionLabel:"name"},null,8,["modelValue","onUpdate:modelValue","options"])]),_:2},1024)):n("",!0),l.dynamicOptions.MEDIUM_CATEGORY&&l.dynamicOptions.MEDIUM_CATEGORY.length?(a(),t(u,{key:17},{default:i(()=>[io,m(p,{modelValue:o.mediumCategory,"onUpdate:modelValue":e=>o.mediumCategory=e,options:l.dynamicOptions.MEDIUM_CATEGORY,optionLabel:"name"},null,8,["modelValue","onUpdate:modelValue","options"])]),_:2},1024)):n("",!0),l.dynamicOptions.MINOR_CATEGORY&&l.dynamicOptions.MINOR_CATEGORY.length?(a(),t(u,{key:18},{default:i(()=>[so,m(p,{modelValue:o.minorCategory,"onUpdate:modelValue":e=>o.minorCategory=e,options:l.dynamicOptions.MINOR_CATEGORY,optionLabel:"name"},null,8,["modelValue","onUpdate:modelValue","options"])]),_:2},1024)):n("",!0),o?(a(),t(u,{key:19},{default:i(()=>[m(d,{id:"companyName",modelValue:o.companyName,"onUpdate:modelValue":e=>o.companyName=e},null,8,["modelValue","onUpdate:modelValue"]),no]),_:2},1024)):n("",!0),o?(a(),t(u,{key:20},{default:i(()=>[m(d,{id:"position",modelValue:o.position,"onUpdate:modelValue":e=>o.position=e},null,8,["modelValue","onUpdate:modelValue"]),mo]),_:2},1024)):n("",!0),o?(a(),t(u,{key:21},{default:i(()=>[m(d,{id:"jobDescription",modelValue:o.jobDescription,"onUpdate:modelValue":e=>o.jobDescription=e},null,8,["modelValue","onUpdate:modelValue"]),uo]),_:2},1024)):n("",!0),o?(a(),t(u,{key:22},{default:i(()=>[m(d,{id:"monthlyIncome",modelValue:o.monthlyIncome,"onUpdate:modelValue":e=>o.monthlyIncome=e},null,8,["modelValue","onUpdate:modelValue"]),ro]),_:2},1024)):n("",!0),o?(a(),t(u,{key:23},{default:i(()=>[m(d,{id:"postalCode",modelValue:o.postalCode,"onUpdate:modelValue":e=>o.postalCode=e},null,8,["modelValue","onUpdate:modelValue"]),co]),_:2},1024)):n("",!0),o?(a(),t(u,{key:24},{default:i(()=>[m(d,{id:"companyPhone",modelValue:o.companyPhone,"onUpdate:modelValue":e=>o.companyPhone=e},null,8,["modelValue","onUpdate:modelValue"]),ho]),_:2},1024)):n("",!0),o?(a(),t(u,{key:25},{default:i(()=>[m(d,{id:"branchNumber",modelValue:o.branchNumber,"onUpdate:modelValue":e=>o.branchNumber=e},null,8,["modelValue","onUpdate:modelValue"]),po]),_:2},1024)):n("",!0)]))),128)),m(I,{label:"Submit",icon:"pi pi-check",onClick:g.submitForm},null,8,["onClick"])])]),_:1})}const Po=v(G,[["render",_o],["__scopeId","data-v-c98662e5"]]);export{Po as default};
